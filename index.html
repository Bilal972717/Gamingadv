<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultation Service with Sticky Checkout</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        header {
            background: linear-gradient(135deg, #4f6df5, #3a56e4);
            color: white;
            padding: 1.5rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hero {
            padding: 4rem 0;
            text-align: center;
            background-color: white;
            margin-bottom: 2rem;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #2c3e50;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: #7f8c8d;
        }

        .content-section {
            display: flex;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .main-content {
            flex: 1;
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .sidebar {
            width: 350px;
            position: relative;
        }

        .sticky-checkout {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid #e1e8ed;
            position: sticky;
            top: 20px;
            transition: all 0.3s ease;
        }

        .sticky-checkout.stuck {
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
            border-color: #4f6df5;
        }

        .price-display {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .price-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .checkout-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #4f6df5, #3a56e4);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .checkout-btn:hover {
            background: linear-gradient(135deg, #3a56e4, #2a46d4);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(63, 81, 181, 0.3);
        }

        .checkout-btn:active {
            transform: translateY(0);
        }

        .consultation-section {
            margin-bottom: 2rem;
        }

        .consultation-section h2 {
            color: #2c3e50;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f0f2f5;
        }

        .consultation-option {
            padding: 1rem;
            border: 1px solid #e1e8ed;
            border-radius: 5px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .consultation-option:hover {
            border-color: #4f6df5;
            background-color: #f8f9ff;
        }

        .consultation-option.selected {
            border-color: #4f6df5;
            background-color: #f0f3ff;
        }

        .consultation-option h3 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .consultation-option p {
            color: #7f8c8d;
        }

        .consultation-option .price {
            font-weight: bold;
            color: #4f6df5;
            margin-top: 0.5rem;
        }

        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        @media (max-width: 768px) {
            .content-section {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .sticky-checkout {
                position: relative;
                top: 0;
                margin-top: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Professional Consultation Services</h1>
            <p>Get expert advice tailored to your needs</p>
        </div>
    </header>

    <div class="container">
        <section class="hero">
            <h1>Find the Perfect Consultation Plan</h1>
            <p>Our experts are ready to help you achieve your goals. Select a consultation option below and book your session.</p>
        </section>

        <div class="content-section">
            <div class="main-content">
                <section class="consultation-section">
                    <h2>Consultation Options</h2>
                    
                    <div class="consultation-option" data-price="99">
                        <h3>Basic Consultation</h3>
                        <p>30-minute session with a general consultant to discuss your initial needs and provide basic guidance.</p>
                        <div class="price">$99</div>
                    </div>
                    
                    <div class="consultation-option selected" data-price="199">
                        <h3>Standard Consultation</h3>
                        <p>60-minute in-depth session with a specialized consultant, including follow-up resources.</p>
                        <div class="price">$199</div>
                    </div>
                    
                    <div class="consultation-option" data-price="349">
                        <h3>Premium Consultation</h3>
                        <p>90-minute comprehensive session with a senior consultant, detailed analysis, and personalized action plan.</p>
                        <div class="price">$349</div>
                    </div>
                    
                    <div class="consultation-option" data-price="599">
                        <h3>Enterprise Consultation</h3>
                        <p>2-hour strategic session for business needs, including team coordination and implementation roadmap.</p>
                        <div class="price">$599</div>
                    </div>
                </section>
                
                <section class="consultation-details">
                    <h2>What to Expect</h2>
                    <p>Our consultation process is designed to provide you with the insights and guidance you need to move forward confidently.</p>
                    
                    <h3>Before Your Session</h3>
                    <p>We'll ask you to complete a brief questionnaire to help us understand your specific situation and goals.</p>
                    
                    <h3>During Your Session</h3>
                    <p>Your consultant will listen to your concerns, ask clarifying questions, and provide expert advice tailored to your unique circumstances.</p>
                    
                    <h3>After Your Session</h3>
                    <p>You'll receive a summary of key takeaways and recommended next steps to help you implement what you've learned.</p>
                    
                    <h3>Our Consultants</h3>
                    <p>All our consultants are highly qualified professionals with years of experience in their respective fields. They undergo rigorous training to ensure they provide the highest quality advice.</p>
                    
                    <h3>Confidentiality</h3>
                    <p>We take your privacy seriously. All consultations are completely confidential, and your information is protected with industry-standard security measures.</p>
                </section>
            </div>
            
            <div class="sidebar">
                <div class="sticky-checkout" id="stickyCheckout">
                    <div class="price-display">$<span id="displayPrice">199</span></div>
                    <input type="number" class="price-input" id="priceInput" value="199" min="1" step="1">
                    <button class="checkout-btn" id="checkoutButton">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 8H4V6H20V8ZM4 13H20V11H4V13ZM4 18H20V16H4V18Z" fill="white"/>
                        </svg>
                        Proceed to Checkout
                    </button>
                    <p style="text-align: center; margin-top: 10px; font-size: 0.9rem; color: #7f8c8d;">
                        Secure payment powered by Stripe
                    </p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2023 Consultation Services. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Initialize Stripe
        const stripe = Stripe('pk_test_your_publishable_key'); // Replace with your actual publishable key

        // DOM Elements
        const consultationOptions = document.querySelectorAll('.consultation-option');
        const priceInput = document.getElementById('priceInput');
        const displayPrice = document.getElementById('displayPrice');
        const checkoutButton = document.getElementById('checkoutButton');
        const stickyCheckout = document.getElementById('stickyCheckout');

        // Set initial selected option
        consultationOptions.forEach(option => {
            option.addEventListener('click', function() {
                // Remove selected class from all options
                consultationOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Add selected class to clicked option
                this.classList.add('selected');
                
                // Update price
                const price = this.getAttribute('data-price');
                priceInput.value = price;
                displayPrice.textContent = price;
            });
        });

        // Update price display when input changes
        priceInput.addEventListener('input', function() {
            displayPrice.textContent = this.value;
        });

        // Handle checkout
        checkoutButton.addEventListener('click', async function() {
            const price = parseFloat(priceInput.value);
            const productName = "Consultation Service";
            
            // Disable button and show loading state
            checkoutButton.disabled = true;
            checkoutButton.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C13.3132 2 14.6136 2.25866 15.8268 2.7612C17.0401 3.26375 18.1425 4.00035 19.0711 4.92893C19.9997 5.85752 20.7362 6.95991 21.2388 8.17317C21.7413 9.38642 22 10.6868 22 12C22 13.3132 21.7413 14.6136 21.2388 15.8268C20.7362 17.0401 19.9997 18.1425 19.0711 19.0711C18.1425 19.9997 17.0401 20.7362 15.8268 21.2388C14.6136 21.7413 13.3132 22 12 22C10.6868 22 9.38642 21.7413 8.17317 21.2388C6.95991 20.7362 5.85752 19.9997 4.92893 19.0711C4.00035 18.1425 3.26375 17.0401 2.7612 15.8268C2.25866 14.6136 2 13.3132 2 12C2 10.6868 2.25866 9.38642 2.7612 8.17317C3.26375 6.95991 4.00035 5.85752 4.92893 4.92893C5.85752 4.00035 6.95991 3.26375 8.17317 2.7612C9.38642 2.25866 10.6868 2 12 2V2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> Processing...';
            
            try {
                // Create checkout session
                const response = await fetch('/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        price: price,
                        productName: productName,
                        successUrl: `${window.location.origin}/success.html`,
                        cancelUrl: `${window.location.origin}/cancel.html`,
                    }),
                });
                
                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                // Redirect to Stripe Checkout
                const result = await stripe.redirectToCheckout({ sessionId: data.sessionId });
                
                if (result.error) {
                    throw new Error(result.error.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
                
                // Reset button
                checkoutButton.disabled = false;
                checkoutButton.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 8H4V6H20V8ZM4 13H20V11H4V13ZM4 18H20V16H4V18Z" fill="white"/></svg> Proceed to Checkout';
            }
        });

        // Enhance sticky checkout visibility when scrolled
        window.addEventListener('scroll', function() {
            const scrollPosition = window.scrollY;
            
            if (scrollPosition > 200) {
                stickyCheckout.classList.add('stuck');
            } else {
                stickyCheckout.classList.remove('stuck');
            }
        });
    </script>
</body>
</html>
